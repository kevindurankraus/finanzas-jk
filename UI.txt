<html lang="es" class="light"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestor Financiero Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&amp;display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                fontFamily: {
                    sans: ['Inter', 'sans-serif'],
                }
            }
        }
    </script>
    <style>
        body { font-family: 'Inter', sans-serif; -webkit-font-smoothing: antialiased; }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #e4e4e7; border-radius: 3px; }
        .dark ::-webkit-scrollbar-thumb { background: #3f3f46; }
        ::-webkit-scrollbar-thumb:hover { background: #d4d4d8; }
        .dark ::-webkit-scrollbar-thumb:hover { background: #52525b; }
        
        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }

        /* Animations */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fadeIn 0.4s ease-out forwards; }
    </style>
</head>
<body class="bg-zinc-50 dark:bg-black text-zinc-900 dark:text-zinc-100 h-screen overflow-hidden selection:bg-indigo-500/30 selection:text-indigo-600 dark:selection:text-indigo-400 transition-colors duration-300">

    <!-- LOGIN SCREEN -->
    <section id="login-screen" class="fixed inset-0 z-50 flex items-center justify-center bg-zinc-50 dark:bg-black transition-opacity duration-500">
        <div class="w-full max-w-sm p-8 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-2xl shadow-xl dark:shadow-none animate-fade-in">
            <div class="h-10 w-10 bg-zinc-900 dark:bg-white text-white dark:text-black rounded-xl flex items-center justify-center mb-6 shadow-sm mx-auto">
                <span class="font-semibold text-xl tracking-tighter">F</span>
            </div>
            
            <h2 class="text-xl font-semibold text-center text-zinc-900 dark:text-white tracking-tight mb-1">Bienvenido de nuevo</h2>
            <p class="text-sm text-center text-zinc-500 dark:text-zinc-400 mb-8">Ingresa tus credenciales para acceder</p>

            <form onsubmit="event.preventDefault(); login();" class="space-y-4">
                <div>
                    <label class="block text-xs font-medium text-zinc-500 dark:text-zinc-400 mb-1.5 ml-1">Email</label>
                    <input type="email" value="usuario@demo.com" class="w-full p-2.5 bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 dark:text-white transition-all" required="">
                </div>
                <div>
                    <label class="block text-xs font-medium text-zinc-500 dark:text-zinc-400 mb-1.5 ml-1">Contraseña</label>
                    <input type="password" value="password" class="w-full p-2.5 bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 dark:text-white transition-all" required="">
                </div>
                <button type="submit" class="w-full py-2.5 bg-zinc-900 dark:bg-white text-white dark:text-black hover:bg-zinc-800 dark:hover:bg-zinc-200 rounded-lg text-sm font-medium transition-all shadow-sm mt-2">
                    Entrar al Sistema
                </button>
            </form>
            
            <p class="mt-6 text-xs text-center text-zinc-400 dark:text-zinc-600">
                Finanzas Pro v2.4
            </p>
        </div>
    </section>

    <!-- APP CONTAINER -->
    <div id="app-screen" class="hidden flex h-screen overflow-hidden">
        
        <!-- Sidebar Navigation -->
        <aside class="w-20 lg:w-64 bg-white dark:bg-zinc-950 border-r border-zinc-200 dark:border-zinc-800 flex flex-col flex-shrink-0 transition-colors duration-300 z-20">
            <div class="h-16 flex items-center justify-center lg:justify-start lg:px-6 border-b border-zinc-100 dark:border-zinc-900">
                <div class="h-8 w-8 bg-zinc-900 dark:bg-white text-white dark:text-black rounded-lg flex items-center justify-center mr-0 lg:mr-3 shadow-sm">
                    <span class="font-medium text-lg tracking-tighter">F</span>
                </div>
                <span class="hidden lg:block font-medium text-sm tracking-tight text-zinc-900 dark:text-zinc-100">Finanzas Pro</span>
            </div>

            <nav class="p-4 space-y-1 flex-1">
                <button onclick="showTab('dashboard')" id="nav-dashboard" class="nav-btn w-full flex items-center p-2.5 rounded-lg text-zinc-500 dark:text-zinc-400 hover:bg-zinc-50 dark:hover:bg-zinc-900 hover:text-zinc-900 dark:hover:text-zinc-200 transition-colors group">
                    <i data-lucide="layout-dashboard" class="w-5 h-5 lg:mr-3 stroke-[1.5]"></i>
                    <span class="hidden lg:block text-sm font-medium">Resumen</span>
                </button>
                <button onclick="showTab('inventory')" id="nav-inventory" class="nav-btn w-full flex items-center p-2.5 rounded-lg text-zinc-500 dark:text-zinc-400 hover:bg-zinc-50 dark:hover:bg-zinc-900 hover:text-zinc-900 dark:hover:text-zinc-200 transition-colors group">
                    <i data-lucide="package" class="w-5 h-5 lg:mr-3 stroke-[1.5]"></i>
                    <span class="hidden lg:block text-sm font-medium">Inventario</span>
                </button>
                <button onclick="showTab('calendar')" id="nav-calendar" class="nav-btn w-full flex items-center p-2.5 rounded-lg text-zinc-500 dark:text-zinc-400 hover:bg-zinc-50 dark:hover:bg-zinc-900 hover:text-zinc-900 dark:hover:text-zinc-200 transition-colors group">
                    <i data-lucide="calendar-days" class="w-5 h-5 lg:mr-3 stroke-[1.5]"></i>
                    <span class="hidden lg:block text-sm font-medium">Citas</span>
                </button>
                <button onclick="showTab('calculator')" id="nav-calculator" class="nav-btn w-full flex items-center p-2.5 rounded-lg text-zinc-500 dark:text-zinc-400 hover:bg-zinc-50 dark:hover:bg-zinc-900 hover:text-zinc-900 dark:hover:text-zinc-200 transition-colors group">
                    <i data-lucide="calculator" class="w-5 h-5 lg:mr-3 stroke-[1.5]"></i>
                    <span class="hidden lg:block text-sm font-medium">Calculadora</span>
                </button>
            </nav>
            <!-- Settings removed as requested -->
        </aside>

        <!-- Main Content Area -->
        <main class="flex-1 flex flex-col h-screen overflow-hidden relative bg-zinc-50 dark:bg-black transition-colors duration-300">
            
            <!-- Top Header -->
            <header class="h-16 bg-white/80 dark:bg-zinc-900/80 backdrop-blur-md border-b border-zinc-200 dark:border-zinc-800 flex items-center justify-between px-6 md:px-8 sticky top-0 z-10 transition-colors duration-300">
                <h1 id="page-title" class="text-sm md:text-lg font-medium text-zinc-900 dark:text-white tracking-tight">Resumen General</h1>
                
                <div class="flex items-center space-x-4 md:space-x-6">
                    <!-- Dark Mode Toggle -->
                    <button onclick="toggleTheme()" class="p-2 rounded-lg text-zinc-500 hover:bg-zinc-100 dark:text-zinc-400 dark:hover:bg-zinc-800 transition-colors focus:outline-none">
                        <i data-lucide="moon" id="theme-icon" class="w-5 h-5 stroke-[1.5]"></i>
                    </button>

                    <div class="h-6 w-px bg-zinc-200 dark:bg-zinc-800 hidden sm:block"></div>

                    <div class="text-right hidden sm:block">
                        <p class="text-xs text-zinc-500 dark:text-zinc-400 font-medium">Saldo Total</p>
                        <p id="header-balance" class="text-sm font-semibold text-zinc-900 dark:text-white tracking-tight">$12,450.00</p>
                    </div>

                    <!-- User Profile Dropdown -->
                    <div class="relative">
                        <button onclick="toggleProfileMenu()" class="h-8 w-8 rounded-full bg-gradient-to-tr from-indigo-500 to-purple-500 shadow-sm ring-2 ring-white dark:ring-zinc-800 cursor-pointer hover:opacity-90 transition-opacity focus:outline-none focus:ring-offset-2 dark:focus:ring-offset-black"></button>
                        
                        <!-- Dropdown Menu -->
                        <div id="profile-menu" class="hidden absolute right-0 mt-2 w-48 bg-white dark:bg-zinc-900 rounded-xl shadow-lg border border-zinc-100 dark:border-zinc-800 py-1 z-50 animate-fade-in origin-top-right">
                            <div class="px-4 py-3 border-b border-zinc-100 dark:border-zinc-800">
                                <p class="text-sm font-medium text-zinc-900 dark:text-white">Usuario Demo</p>
                                <p class="text-xs text-zinc-500 dark:text-zinc-400 truncate">usuario@demo.com</p>
                            </div>
                            <button onclick="logout()" class="w-full text-left px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-zinc-50 dark:hover:bg-zinc-800 flex items-center transition-colors">
                                <i data-lucide="log-out" class="w-4 h-4 mr-2"></i> Cerrar Sesión
                            </button>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Content Scrollable -->
            <div class="flex-1 overflow-y-auto p-6 md:p-8 scroll-smooth" id="main-scroll">
                
                <!-- DASHBOARD VIEW -->
                <div id="view-dashboard" class="view-section space-y-8 max-w-6xl mx-auto animate-fade-in">
                    <!-- Stats Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="bg-white dark:bg-zinc-900 p-6 rounded-xl border border-zinc-200 dark:border-zinc-800 shadow-sm hover:shadow-md transition-all duration-300">
                            <div class="flex justify-between items-start">
                                <div>
                                    <p class="text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase tracking-wider">Ingresos (Mes)</p>
                                    <h3 class="text-2xl font-medium text-emerald-600 dark:text-emerald-500 mt-1 tracking-tight">$8,240.00</h3>
                                </div>
                                <div class="p-2 bg-emerald-50 dark:bg-emerald-500/10 rounded-lg text-emerald-600 dark:text-emerald-400">
                                    <i data-lucide="trending-up" class="w-5 h-5"></i>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white dark:bg-zinc-900 p-6 rounded-xl border border-zinc-200 dark:border-zinc-800 shadow-sm hover:shadow-md transition-all duration-300">
                            <div class="flex justify-between items-start">
                                <div>
                                    <p class="text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase tracking-wider">Gastos (Mes)</p>
                                    <h3 class="text-2xl font-medium text-rose-600 dark:text-rose-500 mt-1 tracking-tight">$3,120.00</h3>
                                </div>
                                <div class="p-2 bg-rose-50 dark:bg-rose-500/10 rounded-lg text-rose-600 dark:text-rose-400">
                                    <i data-lucide="trending-down" class="w-5 h-5"></i>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white dark:bg-zinc-900 p-6 rounded-xl border border-zinc-200 dark:border-zinc-800 shadow-sm hover:shadow-md transition-all duration-300">
                            <div class="flex justify-between items-start">
                                <div>
                                    <p class="text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase tracking-wider">Valor Inventario</p>
                                    <h3 id="stock-value" class="text-2xl font-medium text-indigo-600 dark:text-indigo-400 mt-1 tracking-tight">$4,850.00</h3>
                                </div>
                                <div class="p-2 bg-indigo-50 dark:bg-indigo-500/10 rounded-lg text-indigo-600 dark:text-indigo-400">
                                    <i data-lucide="package-check" class="w-5 h-5"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Transactions -->
                    <div class="bg-white dark:bg-zinc-900 rounded-xl border border-zinc-200 dark:border-zinc-800 shadow-sm">
                        <div class="px-6 py-4 border-b border-zinc-100 dark:border-zinc-800 flex justify-between items-center">
                            <h3 class="text-sm font-medium text-zinc-900 dark:text-white">Movimientos Recientes</h3>
                            <button class="text-xs font-medium text-zinc-500 hover:text-indigo-600 dark:hover:text-indigo-400">Ver todo</button>
                        </div>
                        <div class="divide-y divide-zinc-50 dark:divide-zinc-800/50" id="transaction-list">
                            <!-- Transactions injected via JS -->
                            <div class="px-6 py-4 flex items-center justify-between hover:bg-zinc-50/50 dark:hover:bg-zinc-800/50 transition-colors">
                                <div class="flex items-center space-x-4">
                                    <div class="h-10 w-10 rounded-full bg-emerald-50 dark:bg-emerald-500/10 flex items-center justify-center text-emerald-600 dark:text-emerald-400">
                                        <i data-lucide="arrow-down-left" class="w-5 h-5"></i>
                                    </div>
                                    <div>
                                        <p class="text-sm font-medium text-zinc-900 dark:text-zinc-100">Venta Manzanas Premium</p>
                                        <p class="text-xs text-zinc-500 dark:text-zinc-400">Hoy, 10:23 AM</p>
                                    </div>
                                </div>
                                <span class="text-sm font-medium text-emerald-600 dark:text-emerald-400">+$45.00</span>
                            </div>
                            <div class="px-6 py-4 flex items-center justify-between hover:bg-zinc-50/50 dark:hover:bg-zinc-800/50 transition-colors">
                                <div class="flex items-center space-x-4">
                                    <div class="h-10 w-10 rounded-full bg-rose-50 dark:bg-rose-500/10 flex items-center justify-center text-rose-600 dark:text-rose-400">
                                        <i data-lucide="arrow-up-right" class="w-5 h-5"></i>
                                    </div>
                                    <div>
                                        <p class="text-sm font-medium text-zinc-900 dark:text-zinc-100">Pago Proveedor Frutas</p>
                                        <p class="text-xs text-zinc-500 dark:text-zinc-400">Ayer, 14:00 PM</p>
                                    </div>
                                </div>
                                <span class="text-sm font-medium text-zinc-900 dark:text-zinc-300">-$230.00</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- INVENTORY VIEW -->
                <div id="view-inventory" class="view-section hidden space-y-6 max-w-6xl mx-auto">
                    <div class="flex justify-between items-center">
                        <div class="relative group">
                            <i data-lucide="search" class="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-zinc-400 group-focus-within:text-zinc-600 dark:group-focus-within:text-zinc-200"></i>
                            <input type="text" placeholder="Buscar producto..." class="pl-10 pr-4 py-2 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-zinc-200 dark:focus:ring-zinc-700 w-64 text-zinc-900 dark:text-zinc-100 transition-all placeholder:text-zinc-400">
                        </div>
                        <button class="flex items-center px-4 py-2 bg-zinc-900 dark:bg-zinc-100 hover:bg-zinc-800 dark:hover:bg-white text-white dark:text-black rounded-lg text-sm font-medium transition-colors shadow-sm">
                            <i data-lucide="plus" class="w-4 h-4 mr-2"></i> Nuevo Producto
                        </button>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="inventory-grid">
                        <!-- Item 1 -->
                        <div class="group bg-white dark:bg-zinc-900 rounded-xl border border-zinc-200 dark:border-zinc-800 p-5 shadow-sm hover:shadow-md transition-all">
                            <div class="flex justify-between items-start mb-4">
                                <div class="h-12 w-12 bg-orange-50 dark:bg-orange-500/10 text-orange-600 dark:text-orange-400 rounded-lg flex items-center justify-center">
                                    <i data-lucide="apple" class="w-6 h-6"></i>
                                </div>
                                <span class="bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 text-xs font-medium px-2.5 py-1 rounded-full">Kg</span>
                            </div>
                            <h4 class="text-base font-medium text-zinc-900 dark:text-white">Manzanas Fuji</h4>
                            <div class="flex justify-between items-end mt-4">
                                <div>
                                    <p class="text-xs text-zinc-500 dark:text-zinc-400 mb-1">Stock</p>
                                    <p class="text-sm font-medium text-zinc-900 dark:text-zinc-200"><span id="stock-apple">45.5</span> kg</p>
                                </div>
                                <div class="text-right">
                                    <p class="text-xs text-zinc-500 dark:text-zinc-400 mb-1">Precio</p>
                                    <p class="text-sm font-medium text-zinc-900 dark:text-zinc-200">$3.20 /kg</p>
                                </div>
                            </div>
                            <button onclick="sellItem('Manzanas Fuji', 3.20, 'stock-apple')" class="mt-5 w-full py-2 border border-zinc-200 dark:border-zinc-700 rounded-lg text-sm font-medium text-zinc-700 dark:text-zinc-300 hover:bg-zinc-50 dark:hover:bg-zinc-800 hover:border-zinc-300 dark:hover:border-zinc-600 hover:text-zinc-900 dark:hover:text-white transition-all flex items-center justify-center">
                                <i data-lucide="shopping-cart" class="w-3.5 h-3.5 mr-2"></i> Vender 1kg
                            </button>
                        </div>

                        <!-- Item 2 -->
                        <div class="group bg-white dark:bg-zinc-900 rounded-xl border border-zinc-200 dark:border-zinc-800 p-5 shadow-sm hover:shadow-md transition-all">
                            <div class="flex justify-between items-start mb-4">
                                <div class="h-12 w-12 bg-yellow-50 dark:bg-yellow-500/10 text-yellow-600 dark:text-yellow-400 rounded-lg flex items-center justify-center">
                                    <i data-lucide="banana" class="w-6 h-6"></i>
                                </div>
                                <span class="bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 text-xs font-medium px-2.5 py-1 rounded-full">Kg</span>
                            </div>
                            <h4 class="text-base font-medium text-zinc-900 dark:text-white">Plátanos Canarias</h4>
                            <div class="flex justify-between items-end mt-4">
                                <div>
                                    <p class="text-xs text-zinc-500 dark:text-zinc-400 mb-1">Stock</p>
                                    <p class="text-sm font-medium text-zinc-900 dark:text-zinc-200"><span id="stock-banana">28.0</span> kg</p>
                                </div>
                                <div class="text-right">
                                    <p class="text-xs text-zinc-500 dark:text-zinc-400 mb-1">Precio</p>
                                    <p class="text-sm font-medium text-zinc-900 dark:text-zinc-200">$1.80 /kg</p>
                                </div>
                            </div>
                            <button onclick="sellItem('Plátanos Canarias', 1.80, 'stock-banana')" class="mt-5 w-full py-2 border border-zinc-200 dark:border-zinc-700 rounded-lg text-sm font-medium text-zinc-700 dark:text-zinc-300 hover:bg-zinc-50 dark:hover:bg-zinc-800 hover:border-zinc-300 dark:hover:border-zinc-600 hover:text-zinc-900 dark:hover:text-white transition-all flex items-center justify-center">
                                <i data-lucide="shopping-cart" class="w-3.5 h-3.5 mr-2"></i> Vender 1kg
                            </button>
                        </div>

                        <!-- Item 3 -->
                        <div class="group bg-white dark:bg-zinc-900 rounded-xl border border-zinc-200 dark:border-zinc-800 p-5 shadow-sm hover:shadow-md transition-all">
                            <div class="flex justify-between items-start mb-4">
                                <div class="h-12 w-12 bg-purple-50 dark:bg-purple-500/10 text-purple-600 dark:text-purple-400 rounded-lg flex items-center justify-center">
                                    <i data-lucide="grape" class="w-6 h-6"></i>
                                </div>
                                <span class="bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 text-xs font-medium px-2.5 py-1 rounded-full">Unidad</span>
                            </div>
                            <h4 class="text-base font-medium text-zinc-900 dark:text-white">Uvas Premium</h4>
                            <div class="flex justify-between items-end mt-4">
                                <div>
                                    <p class="text-xs text-zinc-500 dark:text-zinc-400 mb-1">Stock</p>
                                    <p class="text-sm font-medium text-zinc-900 dark:text-zinc-200"><span id="stock-grape">12</span> caj</p>
                                </div>
                                <div class="text-right">
                                    <p class="text-xs text-zinc-500 dark:text-zinc-400 mb-1">Precio</p>
                                    <p class="text-sm font-medium text-zinc-900 dark:text-zinc-200">$5.50 /caj</p>
                                </div>
                            </div>
                            <button onclick="sellItem('Uvas Premium', 5.50, 'stock-grape')" class="mt-5 w-full py-2 border border-zinc-200 dark:border-zinc-700 rounded-lg text-sm font-medium text-zinc-700 dark:text-zinc-300 hover:bg-zinc-50 dark:hover:bg-zinc-800 hover:border-zinc-300 dark:hover:border-zinc-600 hover:text-zinc-900 dark:hover:text-white transition-all flex items-center justify-center">
                                <i data-lucide="shopping-cart" class="w-3.5 h-3.5 mr-2"></i> Vender 1caj
                            </button>
                        </div>
                    </div>
                </div>

                <!-- CALCULATOR VIEW -->
                <div id="view-calculator" class="view-section hidden space-y-8 max-w-4xl mx-auto">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <!-- Weight Calculator -->
                        <div class="bg-white dark:bg-zinc-900 rounded-xl border border-zinc-200 dark:border-zinc-800 shadow-sm p-6">
                            <div class="flex items-center space-x-3 mb-6">
                                <div class="p-2 bg-blue-50 dark:bg-blue-500/10 text-blue-600 dark:text-blue-400 rounded-lg">
                                    <i data-lucide="scale" class="w-5 h-5"></i>
                                </div>
                                <h3 class="text-base font-medium text-zinc-900 dark:text-white">Calculadora de Peso</h3>
                            </div>
                            
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-xs font-medium text-zinc-500 dark:text-zinc-400 mb-1.5">Peso (kg/gr)</label>
                                    <input type="number" id="calc-weight" placeholder="0.00" class="w-full p-3 bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 dark:text-white transition-all" oninput="calculateWeightPrice()">
                                </div>
                                <div>
                                    <label class="block text-xs font-medium text-zinc-500 dark:text-zinc-400 mb-1.5">Precio por Kg/Unidad</label>
                                    <div class="relative">
                                        <span class="absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400 text-sm">$</span>
                                        <input type="number" id="calc-price" placeholder="0.00" class="w-full pl-7 pr-3 py-3 bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 dark:text-white transition-all" oninput="calculateWeightPrice()">
                                    </div>
                                </div>
                                
                                <div class="pt-4 mt-4 border-t border-zinc-100 dark:border-zinc-800">
                                    <div class="flex justify-between items-center">
                                        <span class="text-sm text-zinc-500 dark:text-zinc-400 font-medium">Total Calculado</span>
                                        <span id="calc-total" class="text-2xl font-medium text-zinc-900 dark:text-white tracking-tight">$0.00</span>
                                    </div>
                                </div>
                                <button onclick="addToIncomeFromCalc()" class="w-full py-2 bg-zinc-900 dark:bg-white text-white dark:text-black text-sm font-medium rounded-lg hover:bg-zinc-800 dark:hover:bg-zinc-200 transition-colors">
                                    Registrar Venta
                                </button>
                            </div>
                        </div>

                        <!-- Bill Splitter -->
                        <div class="bg-white dark:bg-zinc-900 rounded-xl border border-zinc-200 dark:border-zinc-800 shadow-sm p-6">
                            <div class="flex items-center space-x-3 mb-6">
                                <div class="p-2 bg-violet-50 dark:bg-violet-500/10 text-violet-600 dark:text-violet-400 rounded-lg">
                                    <i data-lucide="users" class="w-5 h-5"></i>
                                </div>
                                <h3 class="text-base font-medium text-zinc-900 dark:text-white">Repartir Gastos</h3>
                            </div>
                            
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-xs font-medium text-zinc-500 dark:text-zinc-400 mb-1.5">Monto Total</label>
                                    <div class="relative">
                                        <span class="absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400 text-sm">$</span>
                                        <input type="number" id="split-amount" placeholder="0.00" class="w-full pl-7 pr-3 py-3 bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-violet-500/20 focus:border-violet-500 dark:text-white transition-all" oninput="calculateSplit()">
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-xs font-medium text-zinc-500 dark:text-zinc-400 mb-1.5">Cantidad de Personas</label>
                                    <input type="number" id="split-people" placeholder="1" min="1" class="w-full p-3 bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-violet-500/20 focus:border-violet-500 dark:text-white transition-all" oninput="calculateSplit()">
                                </div>
                                
                                <div class="pt-4 mt-4 border-t border-zinc-100 dark:border-zinc-800">
                                    <div class="flex justify-between items-center">
                                        <span class="text-sm text-zinc-500 dark:text-zinc-400 font-medium">Por Persona</span>
                                        <span id="split-result" class="text-2xl font-medium text-zinc-900 dark:text-white tracking-tight">$0.00</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- CALENDAR VIEW -->
                <div id="view-calendar" class="view-section hidden space-y-6 max-w-5xl mx-auto">
                    <div class="flex justify-between items-center">
                        <div class="flex items-center space-x-2">
                            <button class="p-2 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-md text-zinc-500 dark:text-zinc-400"><i data-lucide="chevron-left" class="w-5 h-5"></i></button>
                            <h2 class="text-base font-medium text-zinc-900 dark:text-white">Octubre 2023</h2>
                            <button class="p-2 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-md text-zinc-500 dark:text-zinc-400"><i data-lucide="chevron-right" class="w-5 h-5"></i></button>
                        </div>
                        <button class="px-4 py-2 bg-zinc-900 dark:bg-zinc-100 hover:bg-zinc-800 dark:hover:bg-white text-white dark:text-black rounded-lg text-sm font-medium shadow-sm flex items-center">
                            <i data-lucide="plus" class="w-4 h-4 mr-2"></i> Agendar Cita
                        </button>
                    </div>

                    <div class="space-y-4">
                        <h3 class="text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase tracking-wider ml-1">Próximas Citas</h3>
                        
                        <!-- Appointment Card 1 -->
                        <div id="appt-1" class="bg-white dark:bg-zinc-900 rounded-xl border border-zinc-200 dark:border-zinc-800 p-4 flex flex-col sm:flex-row sm:items-center justify-between gap-4 shadow-sm hover:border-indigo-200 dark:hover:border-indigo-900 transition-colors">
                            <div class="flex items-start space-x-4">
                                <div class="flex flex-col items-center justify-center h-14 w-14 bg-zinc-50 dark:bg-zinc-800 rounded-lg border border-zinc-100 dark:border-zinc-700">
                                    <span class="text-xs text-zinc-500 dark:text-zinc-400 font-medium uppercase">OCT</span>
                                    <span class="text-lg font-semibold text-zinc-900 dark:text-white">24</span>
                                </div>
                                <div>
                                    <h4 class="text-sm font-medium text-zinc-900 dark:text-zinc-100">Reunión con Cliente: Juan Pérez</h4>
                                    <div class="flex items-center text-xs text-zinc-500 dark:text-zinc-400 mt-1 space-x-3">
                                        <span class="flex items-center"><i data-lucide="clock" class="w-3 h-3 mr-1"></i> 14:30</span>
                                        <span class="flex items-center"><i data-lucide="map-pin" class="w-3 h-3 mr-1"></i> Oficina Central</span>
                                    </div>
                                    <div class="flex items-center mt-2">
                                        <span class="bg-indigo-50 dark:bg-indigo-500/10 text-indigo-700 dark:text-indigo-300 text-xs px-2 py-0.5 rounded font-medium border border-indigo-100 dark:border-indigo-500/20">Venta: Manzanas Fuji (10kg)</span>
                                        <span class="ml-2 text-xs font-medium text-zinc-900 dark:text-zinc-200">$32.00</span>
                                    </div>
                                </div>
                            </div>
                            <button onclick="completeAppointment('appt-1', 32.00)" class="px-4 py-2 border border-zinc-200 dark:border-zinc-700 text-zinc-600 dark:text-zinc-300 hover:text-emerald-600 dark:hover:text-emerald-400 hover:border-emerald-200 dark:hover:border-emerald-900 hover:bg-emerald-50 dark:hover:bg-emerald-500/10 rounded-lg text-xs font-medium transition-all flex items-center justify-center sm:w-auto w-full">
                                <i data-lucide="check-circle-2" class="w-4 h-4 mr-2"></i> Completar &amp; Cobrar
                            </button>
                        </div>

                        <!-- Appointment Card 2 -->
                        <div id="appt-2" class="bg-white dark:bg-zinc-900 rounded-xl border border-zinc-200 dark:border-zinc-800 p-4 flex flex-col sm:flex-row sm:items-center justify-between gap-4 shadow-sm hover:border-indigo-200 dark:hover:border-indigo-900 transition-colors">
                            <div class="flex items-start space-x-4">
                                <div class="flex flex-col items-center justify-center h-14 w-14 bg-zinc-50 dark:bg-zinc-800 rounded-lg border border-zinc-100 dark:border-zinc-700">
                                    <span class="text-xs text-zinc-500 dark:text-zinc-400 font-medium uppercase">OCT</span>
                                    <span class="text-lg font-semibold text-zinc-900 dark:text-white">25</span>
                                </div>
                                <div>
                                    <h4 class="text-sm font-medium text-zinc-900 dark:text-zinc-100">Entrega: Restaurante El Sol</h4>
                                    <div class="flex items-center text-xs text-zinc-500 dark:text-zinc-400 mt-1 space-x-3">
                                        <span class="flex items-center"><i data-lucide="clock" class="w-3 h-3 mr-1"></i> 09:00</span>
                                        <span class="flex items-center"><i data-lucide="map-pin" class="w-3 h-3 mr-1"></i> Calle Principal 123</span>
                                    </div>
                                    <div class="flex items-center mt-2">
                                        <span class="bg-indigo-50 dark:bg-indigo-500/10 text-indigo-700 dark:text-indigo-300 text-xs px-2 py-0.5 rounded font-medium border border-indigo-100 dark:border-indigo-500/20">Venta: Surtido Frutas</span>
                                        <span class="ml-2 text-xs font-medium text-zinc-900 dark:text-zinc-200">$150.00</span>
                                    </div>
                                </div>
                            </div>
                            <button onclick="completeAppointment('appt-2', 150.00)" class="px-4 py-2 border border-zinc-200 dark:border-zinc-700 text-zinc-600 dark:text-zinc-300 hover:text-emerald-600 dark:hover:text-emerald-400 hover:border-emerald-200 dark:hover:border-emerald-900 hover:bg-emerald-50 dark:hover:bg-emerald-500/10 rounded-lg text-xs font-medium transition-all flex items-center justify-center sm:w-auto w-full">
                                <i data-lucide="check-circle-2" class="w-4 h-4 mr-2"></i> Completar &amp; Cobrar
                            </button>
                        </div>
                    </div>
                </div>

            </div>
        </main>
    </div>

    <!-- Notification Toast -->
    <div id="toast" class="fixed bottom-6 right-6 bg-zinc-900 dark:bg-white text-white dark:text-black px-4 py-3 rounded-lg shadow-lg transform translate-y-20 opacity-0 transition-all duration-300 flex items-center z-50">
        <i data-lucide="check" class="w-4 h-4 text-emerald-400 dark:text-emerald-600 mr-3"></i>
        <span class="text-sm font-medium" id="toast-message">Operación exitosa</span>
    </div>

    <script>
        lucide.createIcons();
        let balance = 12450.00;

        // Login / Logout Logic
        function login() {
            document.getElementById('login-screen').classList.add('opacity-0', 'pointer-events-none');
            setTimeout(() => {
                document.getElementById('login-screen').classList.add('hidden');
                document.getElementById('app-screen').classList.remove('hidden');
            }, 500);
        }

        function logout() {
            document.getElementById('app-screen').classList.add('hidden');
            const loginScreen = document.getElementById('login-screen');
            loginScreen.classList.remove('hidden', 'opacity-0', 'pointer-events-none');
            document.getElementById('profile-menu').classList.add('hidden');
        }

        function toggleProfileMenu() {
            const menu = document.getElementById('profile-menu');
            menu.classList.toggle('hidden');
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', function(event) {
            const isClickInside = document.querySelector('.relative').contains(event.target);
            const menu = document.getElementById('profile-menu');
            if (!isClickInside && !menu.classList.contains('hidden')) {
                menu.classList.add('hidden');
            }
        });

        // Dark Mode Logic
        function toggleTheme() {
            const html = document.documentElement;
            const icon = document.getElementById('theme-icon');
            
            if (html.classList.contains('dark')) {
                html.classList.remove('dark');
                icon.setAttribute('data-lucide', 'moon');
            } else {
                html.classList.add('dark');
                icon.setAttribute('data-lucide', 'sun');
            }
            lucide.createIcons();
        }

        // Initialize Tab
        function showTab(tabName) {
            document.querySelectorAll('.view-section').forEach(el => el.classList.add('hidden'));
            document.getElementById('view-' + tabName).classList.remove('hidden');
            
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('bg-zinc-100', 'text-zinc-900', 'dark:bg-zinc-900', 'dark:text-white');
                btn.classList.add('text-zinc-500', 'dark:text-zinc-400');
            });
            const activeBtn = document.getElementById('nav-' + tabName);
            activeBtn.classList.add('bg-zinc-100', 'text-zinc-900', 'dark:bg-zinc-900', 'dark:text-white');
            activeBtn.classList.remove('text-zinc-500', 'dark:text-zinc-400');

            const titles = { 'dashboard': 'Resumen General', 'inventory': 'Gestión de Inventario', 'calculator': 'Herramientas', 'calendar': 'Agenda de Citas' };
            document.getElementById('page-title').innerText = titles[tabName];
        }

        function formatMoney(amount) {
            return '$' + amount.toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,');
        }

        function showToast(message) {
            const toast = document.getElementById('toast');
            document.getElementById('toast-message').innerText = message;
            toast.classList.remove('translate-y-20', 'opacity-0');
            setTimeout(() => { toast.classList.add('translate-y-20', 'opacity-0'); }, 3000);
        }

        function addTransaction(title, amount, type) {
            const list = document.getElementById('transaction-list');
            const isIncome = type === 'income';
            // Logic handled by CSS classes inside literal for simplicity
            const html = `
                <div class="px-6 py-4 flex items-center justify-between hover:bg-zinc-50/50 dark:hover:bg-zinc-800/50 transition-colors animate-fade-in">
                    <div class="flex items-center space-x-4">
                        <div class="h-10 w-10 rounded-full ${isIncome ? 'bg-emerald-50 dark:bg-emerald-500/10 text-emerald-600 dark:text-emerald-400' : 'bg-rose-50 dark:bg-rose-500/10 text-rose-600 dark:text-rose-400'} flex items-center justify-center">
                            <i data-lucide="${isIncome ? 'arrow-down-left' : 'arrow-up-right'}" class="w-5 h-5"></i>
                        </div>
                        <div>
                            <p class="text-sm font-medium text-zinc-900 dark:text-zinc-100">${title}</p>
                            <p class="text-xs text-zinc-500 dark:text-zinc-400">Ahora mismo</p>
                        </div>
                    </div>
                    <span class="text-sm font-medium ${isIncome ? 'text-emerald-600 dark:text-emerald-400' : 'text-zinc-900 dark:text-zinc-300'}">${isIncome ? '+' : '-'}${formatMoney(amount)}</span>
                </div>`;
            list.insertAdjacentHTML('afterbegin', html);
            lucide.createIcons();
            if(isIncome) balance += amount; else balance -= amount;
            document.getElementById('header-balance').innerText = formatMoney(balance);
        }

        function sellItem(name, price, stockId) {
            const stockEl = document.getElementById(stockId);
            let currentStock = parseFloat(stockEl.innerText);
            if(currentStock >= 1) {
                currentStock -= 1;
                stockEl.innerText = currentStock;
                addTransaction(`Venta: ${name}`, price, 'income');
                showToast(`Vendido 1 unidad de ${name}`);
            } else {
                showToast('Stock insuficiente');
            }
        }

        function calculateWeightPrice() {
            const weight = parseFloat(document.getElementById('calc-weight').value) || 0;
            const price = parseFloat(document.getElementById('calc-price').value) || 0;
            document.getElementById('calc-total').innerText = formatMoney(weight * price);
        }

        function addToIncomeFromCalc() {
            const weight = parseFloat(document.getElementById('calc-weight').value) || 0;
            const price = parseFloat(document.getElementById('calc-price').value) || 0;
            const total = weight * price;
            if(total > 0) {
                addTransaction('Venta (Calculadora)', total, 'income');
                showToast(`Venta registrada: ${formatMoney(total)}`);
                document.getElementById('calc-weight').value = '';
                document.getElementById('calc-total').innerText = '$0.00';
            }
        }

        function calculateSplit() {
            const amount = parseFloat(document.getElementById('split-amount').value) || 0;
            const people = parseInt(document.getElementById('split-people').value) || 1;
            document.getElementById('split-result').innerText = formatMoney(people > 0 ? amount / people : 0);
        }

        function completeAppointment(cardId, value) {
            const card = document.getElementById(cardId);
            card.classList.add('opacity-50', 'pointer-events-none', 'bg-zinc-50', 'dark:bg-zinc-800/50');
            const btn = card.querySelector('button');
            btn.innerHTML = '<i data-lucide="check" class="w-4 h-4 mr-2"></i> Completado';
            btn.className = "px-4 py-2 border border-emerald-200 dark:border-emerald-900 text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-500/10 rounded-lg text-xs font-medium flex items-center justify-center sm:w-auto w-full";
            lucide.createIcons();
            addTransaction('Ingreso por Cita Completada', value, 'income');
            showToast('Cita completada y cobrada');
        }

        // Init
        document.getElementById('nav-dashboard').classList.add('bg-zinc-100', 'text-zinc-900', 'dark:bg-zinc-900', 'dark:text-white');
        document.getElementById('nav-dashboard').classList.remove('text-zinc-500', 'dark:text-zinc-400');
    </script>

</body></html>